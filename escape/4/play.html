<!doctype html>
<html lang="ja">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="icon" href="data:," />
    <title>洋室からの脱出 | Escape Hub</title>
    <style>
      :root {
        color-scheme: light;
      }

      * {
        box-sizing: border-box;
      }

      body {
        margin: 0;
        min-height: 100vh;
        background:
          radial-gradient(circle at 14% 10%, rgba(246, 251, 255, 0.9), transparent 54%),
          linear-gradient(160deg, #dbe8f6 0%, #c5d6e8 48%, #afc3d8 100%);
        color: #1a2838;
        font-family: "Hiragino Kaku Gothic ProN", "Yu Gothic", sans-serif;
      }

      .page {
        width: min(1080px, 94vw);
        margin: 0 auto;
        padding: 20px 0 28px;
        display: grid;
        gap: 14px;
      }

      .topbar {
        display: flex;
        flex-wrap: wrap;
        justify-content: space-between;
        align-items: center;
        gap: 10px 14px;
        padding: 0 2px;
      }

      .title-wrap h1 {
        margin: 0;
        font-size: clamp(1.32rem, 2.4vw, 1.78rem);
        line-height: 1.25;
      }

      .title-wrap p {
        margin: 4px 0 0;
        font-size: 0.93rem;
        color: rgba(18, 34, 52, 0.75);
      }

      .actions {
        display: flex;
        flex-wrap: wrap;
        gap: 8px;
      }

      .btn {
        display: inline-flex;
        align-items: center;
        justify-content: center;
        min-height: 40px;
        padding: 9px 14px;
        border-radius: 999px;
        border: 1px solid #2b3f56;
        text-decoration: none;
        font-size: 0.92rem;
        font-weight: 700;
        transition: transform 0.15s ease, box-shadow 0.15s ease;
      }

      .btn:hover {
        transform: translateY(-1px);
      }

      .btn-back {
        color: #20344c;
        background: #f1f7ff;
        box-shadow: 0 6px 14px rgba(28, 46, 68, 0.15);
      }

      .btn-direct {
        color: #fff;
        border-color: #315f98;
        background: linear-gradient(140deg, #3776c3, #235286);
        box-shadow: 0 8px 18px rgba(40, 74, 112, 0.28);
      }

      .frame-shell {
        border-radius: 16px;
        border: 1px solid rgba(26, 40, 56, 0.16);
        background: rgba(255, 255, 255, 0.84);
        box-shadow: 0 18px 34px rgba(25, 39, 56, 0.18);
        overflow: hidden;
      }

      .game-frame {
        width: 100%;
        min-height: 460px;
        border: 0;
        display: block;
        background: #eef5fc;
      }

      .hint {
        margin: 0;
        padding: 10px 14px;
        border-top: 1px solid rgba(24, 36, 53, 0.1);
        font-size: 0.85rem;
        color: rgba(22, 35, 49, 0.74);
        background: rgba(242, 248, 255, 0.92);
      }

      @media (max-width: 740px) {
        .page {
          width: 96vw;
          padding-top: 14px;
        }

        .game-frame {
          min-height: 400px;
        }
      }
    </style>
  </head>
  <body>
    <main class="page">
      <header class="topbar">
        <div class="title-wrap">
          <h1>洋室からの脱出（#4）</h1>
          <p>一覧導線つきの表示ページです。ゲーム本体は埋め込みで読み込みます。</p>
        </div>
        <nav class="actions" aria-label="game-page-actions">
          <a class="btn btn-back" href="/escape/">一覧へ戻る</a>
          <a class="btn btn-direct" href="/escape/4/" target="_blank" rel="noopener">ゲーム単体で開く</a>
        </nav>
      </header>

      <section class="frame-shell" aria-label="embedded-game">
        <iframe
          id="game-frame"
          class="game-frame"
          src="./index.html?v=embed-shell-1"
          title="洋室からの脱出 ゲーム本体"
          loading="eager"
          allow="fullscreen"
          referrerpolicy="same-origin"
        ></iframe>
        <p class="hint">操作が効かない時は一度ゲーム画面をクリックしてフォーカスしてください。</p>
      </section>
    </main>

    <script>
      (() => {
        const frame = document.getElementById("game-frame");
        if (!frame) return;

        const adjustHeight = () => {
          let nextHeight = 640;
          const doc = frame.contentDocument;
          if (doc?.body) {
            const bodyHeight = Math.ceil(doc.body.scrollHeight);
            if (Number.isFinite(bodyHeight) && bodyHeight > 0) {
              nextHeight = bodyHeight;
            }
          }
          frame.style.height = `${Math.max(400, nextHeight)}px`;
        };

        frame.addEventListener("load", adjustHeight);
        window.addEventListener("resize", adjustHeight);
        setTimeout(adjustHeight, 240);
      })();
    </script>
  </body>
</html>
