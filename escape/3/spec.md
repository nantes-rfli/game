# 脱出ゲーム #3 仕様書（仮）

## タイトル（仮）
図書館脱出（#3）

## 概要
静かな図書館で、書架・机・ページに隠された手がかりを集めて出口を開く短編脱出ゲーム。

- プレイ時間: 6〜8分
- 難易度: Normal（Easy/Hard切替あり）
- ターゲット: スマホ/PC ブラウザ（縦画面優先）
- 技術: HTML/CSS/Vanilla JS

## 体験の軸
- 目線移動（4面）＋クリック/タップで調査
- 3段階の謎解きでテンポ良く進む
- 小物を「使って解く」気持ちよさ（しおりの重ね合わせ）

## 画面構成
- 上部: タイトル/タグライン/難易度セレクト
- 中央: 4面切り替えの部屋（北/東/南/西）
- 下部: インベントリ / ヒント / ログ
- モーダル: 調査拡大・暗号入力・アイテム詳細・クリア

## シーン（4面）と配置
### 北面（書架）
- オブジェクト: 書架（object: shelf）
- 仕掛け: 色/記号つき背表紙が3列ある（例: ▲●■ + 色）
- 取得: 書架を調べると「並びの規則」に気づくログ

### 東面（司書机）
- オブジェクト: 机/引き出し（object: desk）
- オブジェクト: 机上カード（object: card）
- 仕掛け: 3桁ダイヤル入力
- 取得: 開けると「しおり」アイテム入手

### 南面（読書テーブル）
- オブジェクト: テーブル上のページ（object: page）
- 仕掛け: しおりを使うと数列が浮かぶ
- 取得: 扉の暗号ヒント

### 西面（出口）
- オブジェクト: ドア（object: door）
- 仕掛け: 3桁暗号入力で解錠

## アイテム
- しおり（bookmark）
  - 3つの穴が空いた透明しおり
  - テーブルのページに重ねると数字が見える

## 謎解き設計
### 謎1: 書架の背表紙数え
- 書架に3つの記号（▲/●/■）が並ぶ背表紙を表示
- 「記号の順番」は机上カードで提示（例: ▲→●→■）
- 各記号の本の冊数を数える → 3桁コード
- コードは毎回ランダムだが矛盾しないように生成

### 謎2: 机の引き出し
- 謎1のコードで開く
- しおり入手 + ログ更新

### 謎3: しおりの重ね合わせ
- テーブル上に 3x3 の数字グリッド
- しおりの穴位置と一致する 3 桁が浮かぶ
- その数字がドアの暗号

## 難易度仕様
- Easy: ヒント表示あり / 具体的な指示文
- Normal: ヒント表示あり / 具体的手順は控えめ
- Hard: ヒント表示なし

## ログ/ヒント仕様
- 行動ごとにログを追加（最大6件）
- ヒントは「手がかり発見」タイミングで追加
- ヒント内容は難易度に応じて出し分け

## UI/UX
- 調査対象はボタンで配置し、タップ領域を広めに
- モーダルは閉じる/戻る導線を必ず用意
- 入力は全角数字も許容し、エラーメッセージを表示
- クリア後は「もう一度」ボタンでリスタート

## アセット一覧（新規）
- 書架: shelf.svg
- 背表紙記号: spine-symbols.svg or individual icons
- 司書机/引き出し: desk.svg
- しおり: bookmark.svg
- テーブル/ページ: table.svg / page.svg
- ドア/キーパッド: door.svg

## 技術要件
- 依存ライブラリ無し
- 既存の構成に合わせ `escape/3/index.html`, `styles.css`, `script.js`
- 画面サイズが小さい場合は縦スクロールで対応
- コンソールエラー無し

## 受け入れ条件
- 6〜8分程度でクリアできる難易度
- 謎が論理的につながり、行き止まりがない
- Easy/Normal/Hardで体験が明確に変化
- 入力エラー時に明確なメッセージ表示
- 主要端末（スマホ/PC）でレイアウト破綻なし

## 次の作業（実装フェーズ）
- 画面レイアウト/コンポーネント構築
- パズル生成ロジックの実装
- SVGアセット作成
- 動線調整とテスト
